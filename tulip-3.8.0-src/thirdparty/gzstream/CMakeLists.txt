SET(gzstream_SRCS
    gzstream.cpp 
    gzstream.h
)

IF(WIN32)
    FIND_PACKAGE(ZLIB REQUIRED)
ENDIF()

INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR} ${CMAKE_CURRENT_SOURCE_DIR})

IF(UNIX)
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fPIC")
ENDIF(UNIX)

IF(MSVC)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DGZSTREAM_DLL")
ENDIF()

ADD_LIBRARY(${GZStreamLibrary} SHARED ${gzstream_SRCS})
TARGET_LINK_LIBRARIES(${GZStreamLibrary} ${ZLIB_LIBRARY})

IF(UBUNTU_PPA_BUILD)
SET_TARGET_PROPERTIES(${GZStreamLibrary} 
		      PROPERTIES SUFFIX "-tulip${TulipVersion}.so")
ENDIF(UBUNTU_PPA_BUILD)

INSTALL(TARGETS ${GZStreamLibrary}
       RUNTIME DESTINATION ${TulipBinInstallDir} COMPONENT libtulip
       LIBRARY DESTINATION ${TulipLibInstallDir} COMPONENT libtulip
       ARCHIVE DESTINATION ${TulipLibInstallDir} COMPONENT libtulip)
